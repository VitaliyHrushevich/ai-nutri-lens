import ollama

def analyze_ingredients(ingredients_list):
    print("üß† AI is thinking (Context: Global & CIS Markets)...")

    ingredients_str = ", ".join(ingredients_list)

    prompt = f"""
    –¢—ã ‚Äî –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–∏—Ç–∞–Ω–∏—é, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ —Ä—ã–Ω–∫–∞—Ö –ï–≤—Ä–æ–ø—ã, –°–®–ê –∏ –°–ù–ì. 
    –¢–µ–±–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º –¥–ª—è –í–æ—Å—Ç–æ—á–Ω–æ–π –ï–≤—Ä–æ–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–≥—É—â–µ–Ω–Ω–æ–µ –º–æ–ª–æ–∫–æ, —Ç–≤–æ—Ä–æ–∂–Ω—ã–π —Å—ã—Ä–æ–∫ –∏ —Ç.–¥.).

    –ò–ù–ì–†–ï–î–ò–ï–ù–¢–´: {ingredients_str}

    –ó–ê–î–ê–ß–ò:
    1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–π —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞, –µ—Å–ª–∏ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ —Å–æ—Å—Ç–∞–≤—É. 
    2. –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ–¥—É–∫—Ç —Å –≤—ã—Å–æ–∫–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º —Å–∞—Ö–∞—Ä–∞ (–∫–∞–∫ —Å–≥—É—â–µ–Ω–Ω–æ–µ –º–æ–ª–æ–∫–æ), –æ–±—ä—è—Å–Ω–∏ –µ–≥–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫—É.
    3. –û—Ü–µ–Ω–∏ —á–∏—Å—Ç–æ—Ç—É —Å–æ—Å—Ç–∞–≤–∞ (–µ—Å—Ç—å –ª–∏ —Ç–∞–º –ª–∏—à–Ω–∏–µ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–µ –∂–∏—Ä—ã –≤–º–µ—Å—Ç–æ –º–æ–ª–æ—á–Ω—ã—Ö).
    4. –î–∞–π –≤–µ—Ä–¥–∏–∫—Ç –∏ –æ—Ü–µ–Ω–∫—É –æ—Ç 1 –¥–æ 10.

    –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
    """

    try:
        response = ollama.chat(model='llama3', messages=[
            {'role': 'user', 'content': prompt},
        ])
        return response['message']['content']
    except Exception as e:
        return f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Ollama: {e}"
